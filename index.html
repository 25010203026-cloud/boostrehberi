<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="OLlba8kbebltSCUHH0uxNQsYZDxfTAL1eQ1onG2cS2Y" />
    <title>BoostRehberi - Oyun Performans & T√ºrk√ße Yama Merkezi</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap');

        body, a, button, input, textarea, select {
            cursor: url('https://cdn.custom-cursor.com/db/cursor/32/minecraft_diamond_pickaxe_cursor.png'), auto !important;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(rgba(15, 20, 25, 0.85), rgba(15, 20, 25, 0.95)), url('arkaplan.jpg') center/cover fixed;
            color: #E0E0E0; margin: 0; padding: 0; overflow-x: hidden;
        }

        /* HEADER */
        header { 
            background-color: rgba(17, 21, 29, 0.95); padding: 20px 50px; 
            display: flex; justify-content: space-between; align-items: center; 
            border-bottom: 2px solid #1ABC9C; position: sticky; top: 0; z-index: 100; backdrop-filter: blur(10px);
        }
        .logo { font-size: 28px; font-weight: 900; color: #FFFFFF; text-decoration: none; letter-spacing: 1px;}
        .logo span { color: #1ABC9C; }
        
        .header-right { display: flex; align-items: center; gap: 20px; }
        .contact-btn { color: #AAB7B8; text-decoration: none; font-size: 14px; font-weight: 700; transition: 0.3s; display: flex; align-items: center; gap: 5px;}
        .contact-btn:hover { color: #FFF; }

        .login-btn { background: transparent; border: 2px solid #1ABC9C; color: #1ABC9C; padding: 10px 20px; border-radius: 8px; font-weight: 700; font-size: 14px; transition: 0.3s; }
        .login-btn:hover { background: #1ABC9C; color: #111; box-shadow: 0 0 15px rgba(26, 188, 156, 0.5); }
        
        .user-profile { display: none; align-items: center; gap: 10px; color: #2ECC71; font-weight: 700; }
        .logout-btn { background: transparent; border: 1px solid #E74C3C; color: #E74C3C; padding: 5px 10px; border-radius: 4px; font-size: 12px; transition: 0.3s;}
        .logout-btn:hover { background: #E74C3C; color: #FFF; }
        .admin-badge { background: #E74C3C; color: #FFF; font-size: 10px; padding: 2px 6px; border-radius: 4px; margin-left: 5px; display: none;}

        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px 50px 20px; }

        /* Vƒ∞TRƒ∞N B√ñL√úM√ú */
        #showcaseSection { display: block; animation: fadeIn 0.4s; }
        .hero { text-align: center; padding: 80px 20px 50px 20px; }
        .hero h1 { font-size: 50px; color: #FFF; margin-bottom: 15px; font-weight: 900; text-transform: uppercase;}
        .hero h1 span { color: #1ABC9C; }
        .hero p { font-size: 18px; color: #AAB7B8; max-width: 700px; margin: 0 auto; line-height: 1.6; }

        .forum-banner { background: linear-gradient(135deg, rgba(26, 188, 156, 0.1), rgba(109, 40, 217, 0.1)); border: 1px solid rgba(26, 188, 156, 0.3); border-radius: 12px; padding: 30px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 50px; }
        .forum-text h2 { margin: 0 0 10px 0; color: #FFF; font-size: 24px; display: flex; align-items: center; gap: 10px;}
        .forum-text p { margin: 0; color: #AAB7B8; font-size: 15px; }
        .forum-btn { background: linear-gradient(90deg, #1ABC9C, #3498DB); border: none; color: #FFF; padding: 15px 30px; border-radius: 8px; font-size: 16px; font-weight: 800; transition: 0.3s; box-shadow: 0 5px 15px rgba(26, 188, 156, 0.3); }
        .forum-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(26, 188, 156, 0.5); }

        .section-title { font-size: 28px; color: #FFF; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 30px; display: flex; align-items: center; gap: 10px; }
        .games-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-bottom: 60px; }
        
        .game-card { background-color: rgba(20, 25, 30, 0.8); border: 1px solid #333; border-radius: 12px; padding: 30px; transition: 0.3s; display: flex; flex-direction: column; position: relative; overflow: hidden; }
        .game-card::before { content: ""; position: absolute; top: 0; left: 0; width: 4px; height: 100%; }
        
        /* Mod & FPS Renkleri */
        .game-card.mc::before { background-color: #2ECC71; }
        .game-card.gta::before { background-color: #F39C12; }
        
        /* Yama Renkleri */
        .game-card.tr-yama::before { background-color: #E74C3C; }

        .game-card:hover { transform: translateY(-10px); background-color: rgba(30, 35, 45, 0.9); border-color: #1ABC9C; box-shadow: 0 10px 20px rgba(26, 188, 156, 0.2); }
        .game-card.tr-yama:hover { border-color: #E74C3C; box-shadow: 0 10px 20px rgba(231, 76, 60, 0.2); }
        
        .game-icon { font-size: 40px; margin-bottom: 15px; }
        .game-card h3 { color: #FFF; font-size: 22px; margin: 0 0 10px 0; }
        .game-card p { color: #8892B0; font-size: 14px; margin: 0 0 25px 0; flex-grow: 1; }
        
        .play-btn { background-color: #1A1A1A; color: #FFF; text-align: center; text-decoration: none; padding: 12px; border-radius: 6px; font-weight: 700; border: 1px solid #444; transition: 0.3s; }
        .game-card .play-btn:hover { background-color: #1ABC9C; color: #000; border-color: #1ABC9C;}
        .game-card.tr-yama .play-btn:hover { background-color: #E74C3C; color: #FFF; border-color: #E74C3C;}
        
        .badge-mod { display: inline-block; background: rgba(46, 204, 113, 0.1); color: #2ECC71; padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: 700; margin-bottom: 10px; border: 1px solid #2ECC71; }
        .badge-yama { display: inline-block; background: rgba(231, 76, 60, 0.1); color: #E74C3C; padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: 700; margin-bottom: 10px; border: 1px solid #E74C3C; }

        /* FORUM B√ñL√úM√ú (DOKUNULMADI) */
        #forumSection { display: none; padding-top: 40px; animation: fadeIn 0.4s; }
        .forum-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 30px; border-bottom: 1px solid #2C3E50; padding-bottom: 20px;}
        .forum-header h1 { font-size: 32px; color: #FFF; margin: 0; font-weight: 800; display: flex; align-items: center; gap: 10px;}
        .forum-actions { display: flex; gap: 15px; }
        .back-to-games-btn { background: transparent; color: #AAB7B8; border: 1px solid #555; padding: 12px 20px; border-radius: 6px; font-weight: 700; transition: 0.3s; }
        .back-to-games-btn:hover { background: #333; color: #FFF; }
        .new-topic-btn { background: #1ABC9C; color: #000; border: none; padding: 12px 25px; border-radius: 6px; font-weight: 800; font-size: 15px; transition: 0.3s; box-shadow: 0 4px 10px rgba(26, 188, 156, 0.3);}
        .new-topic-btn:hover { background: #16A085; transform: translateY(-2px);}

        .forum-grid { display: grid; grid-template-columns: 260px 1fr; gap: 30px; align-items: start; }
        .forum-sidebar { background-color: rgba(20, 25, 30, 0.8); padding: 20px; border-radius: 12px; border: 1px solid #2C3E50; position: sticky; top: 90px; }
        .forum-sidebar-title { color: #8892B0; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px; font-weight: 700; }
        .cat-btn { background: transparent; color: #AAB7B8; border: none; width: 100%; text-align: left; padding: 12px 15px; border-radius: 8px; font-size: 14px; font-weight: 600; transition: 0.2s; margin-bottom: 5px; display: flex; justify-content: space-between; align-items: center;}
        .cat-btn:hover { background: rgba(255,255,255,0.05); color: #FFF; }
        .cat-btn.active { background: rgba(26, 188, 156, 0.1); color: #1ABC9C; border-left: 3px solid #1ABC9C; }

        .thread-list { display: flex; flex-direction: column; gap: 15px; }
        .thread-card { background: rgba(22, 27, 34, 0.9); border: 1px solid #2C3E50; border-radius: 10px; padding: 20px; display: flex; flex-direction: column; gap: 15px; transition: 0.2s; position: relative;}
        .thread-main { display: flex; gap: 20px; align-items: flex-start; }
        .thread-avatar { width: 50px; height: 50px; border-radius: 50%; background: #2C3E50; display: flex; justify-content: center; align-items: center; font-size: 24px; border: 2px solid #1ABC9C; flex-shrink: 0; overflow: hidden;}
        .thread-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .thread-content { flex-grow: 1; }
        .thread-title { margin: 0 0 5px 0; color: #FFF; font-size: 18px; font-weight: 700; }
        .thread-body { color: #AAB7B8; font-size: 14px; line-height: 1.5; margin-bottom: 10px;}
        .thread-meta { font-size: 12px; color: #8892B0; display: flex; gap: 15px; align-items: center; }
        .thread-author { color: #1ABC9C; font-weight: 700; }
        .thread-actions { display: flex; gap: 10px; margin-top: 10px; align-items: center;}
        .reply-btn { background: rgba(26, 188, 156, 0.1); color: #1ABC9C; border: 1px solid #1ABC9C; padding: 6px 12px; border-radius: 4px; font-size: 12px; font-weight: 700; transition: 0.2s;}
        
        .admin-delete-btn { background: rgba(231, 76, 60, 0.1); color: #E74C3C; border: 1px solid #E74C3C; padding: 6px 12px; border-radius: 4px; font-size: 12px; font-weight: 700; transition: 0.2s; display: none; cursor: pointer;}
        .replies-container { background: rgba(0, 0, 0, 0.3); border-left: 2px solid #3498DB; padding: 15px; border-radius: 8px; margin-top: 10px; display: flex; flex-direction: column; gap: 10px;}
        .reply-item { display: flex; gap: 10px; align-items: flex-start; border-bottom: 1px solid #333; padding-bottom: 10px;}
        .reply-item:last-child { border-bottom: none; padding-bottom: 0;}
        .reply-avatar { width: 30px; height: 30px; border-radius: 50%; border: 1px solid #3498DB; overflow: hidden; flex-shrink: 0;}
        .reply-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .reply-content { flex-grow: 1; font-size: 13px; color: #DDD;}
        .reply-author { color: #3498DB; font-weight: 700; font-size: 12px; margin-bottom: 3px; display: block;}
        .pinned { border-left: 4px solid #F1C40F !important; }

        /* MODALLAR (DOKUNULMADI) */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px); z-index: 1000; justify-content: center; align-items: center; }
        .modal-box { background: #11151D; width: 400px; border-radius: 12px; border: 1px solid #1ABC9C; padding: 30px; box-shadow: 0 15px 30px rgba(0,0,0,0.5); position: relative; animation: slideDown 0.3s ease-out; text-align: center;}
        .modal-box.large { width: 600px; text-align: left;}
        @keyframes slideDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .close-btn { position: absolute; top: 15px; right: 20px; font-size: 24px; color: #888; background: none; border: none; font-weight: bold; padding: 0;}
        .google-btn { background: #FFF; color: #444; font-weight: 800; border: none; padding: 15px; border-radius: 6px; font-size: 16px; margin-top: 20px; transition: 0.3s; width: 100%; display: flex; align-items: center; justify-content: center; gap: 15px;}
        .google-btn img { width: 24px; }
        .input-group { margin-bottom: 15px; text-align: left; }
        .input-group label { font-size: 12px; color: #AAB7B8; font-weight: 600; margin-bottom: 5px; display: block; }
        .input-group input, .input-group select, .input-group textarea { width: 100%; padding: 12px; background: #1A202C; border: 1px solid #333; border-radius: 6px; color: #FFF; font-family: 'Montserrat'; box-sizing: border-box; outline: none;}
        .input-group textarea { height: 120px; resize: none; }
        .submit-btn { background: #1ABC9C; color: #000; font-weight: 800; border: none; padding: 15px; border-radius: 6px; font-size: 16px; margin-top: 10px; transition: 0.3s; width: 100%; }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="logo">Boost<span>Rehberi</span></a>
        <div class="header-right">
            <button id="loginBtn" class="login-btn" onclick="openAuthModal()">Giri≈ü Yap / √úye Ol</button>
            <div id="userProfile" class="user-profile">
                <img id="userPhoto" src="" alt="Profil" style="width: 30px; height: 30px; border-radius: 50%; border: 2px solid #2ECC71;">
                <span><span id="usernameDisplay">Patron</span><span id="adminBadge" class="admin-badge">ADMƒ∞N</span></span>
                <button class="logout-btn" onclick="logoutFirebase()">√áƒ±kƒ±≈ü</button>
            </div>
        </div>
    </header>

    <div class="container">
        <div id="showcaseSection">
            <section class="hero">
                <h1>Oyunlarda <span>Sƒ±nƒ±rlarƒ±</span> Zorla</h1>
                <p>FPS artƒ±rma taktikleri, g√ºncel modlar ve vir√ºss√ºz T√ºrkiye'nin en b√ºy√ºk T√ºrk√ße Yama ar≈üivi.</p>
            </section>

            <div class="forum-banner">
                <div class="forum-text">
                    <h2>üëë VIP Oyuncu Forumu</h2>
                    <p>Sorunlarƒ±nƒ± payla≈ü, yamalarƒ± ilk sen indir ve topluluƒüa katƒ±l.</p>
                </div>
                <button class="forum-btn" onclick="goToForum()">Forum'a Gir ‚ûî</button>
            </div>

            <h2 class="section-title">üöÄ Performans ve Mod Merkezi</h2>
            <div class="games-grid">
                <div class="game-card mc">
                    <div class="badge-mod">FPS Boost & Mod</div>
                    <div class="game-icon">‚õèÔ∏è</div>
                    <h3>Minecraft</h3>
                    <p>Oyun motorunu deƒüi≈ütiren FPS modlarƒ±, sƒ±nƒ±rsƒ±z farmlar ve teknik rehberler.</p>
                    <a href="minecraft.html" class="play-btn">Rehberleri ƒ∞ncele</a>
                </div>
                
                <div class="game-card gta">
                    <div class="badge-mod">Optimizasyon</div>
                    <div class="game-icon">üî´</div>
                    <h3>GTA 5 & FiveM</h3>
                    <p>Oyunu bozmadan mod kurma, ban riski olmayan config dosyalarƒ±.</p>
                    <a href="gta5.html" class="play-btn">Rehberleri ƒ∞ncele</a>
                </div>
            </div>

            <h2 class="section-title">üáπüá∑ T√ºrk√ße Yama Ar≈üivi</h2>
            <div class="games-grid">
                <div class="game-card tr-yama">
                    <div class="badge-yama">%100 √áeviri & Vir√ºss√ºz</div>
                    <div class="game-icon">üó°Ô∏è</div>
                    <h3>Assassin's Creed Odyssey</h3>
                    <p>T√ºm DLC'ler dahil, men√º ve diyaloglar tamamen T√ºrk√ße. Kurulum rehberi i√ßeride.</p>
                    <a href="ac-odyssey-yama.html" class="play-btn">Yamayƒ± ƒ∞ndir</a>
                </div>

                <div class="game-card tr-yama">
                    <div class="badge-yama">G√ºncel S√ºr√ºm</div>
                    <div class="game-icon">ü§†</div>
                    <h3>Red Dead Redemption 2</h3>
                    <p>Font sorunu √ß√∂z√ºlm√º≈ü, kutucuk hatasƒ± vermeyen kusursuz RDR 2 T√ºrk√ße Yamasƒ±.</p>
                    <a href="rdr2-yama.html" class="play-btn">Yamayƒ± ƒ∞ndir</a>
                </div>
            </div>
        </div>

        <div id="forumSection">
            <div class="forum-header">
                <h1>üí¨ Topluluk Forumu</h1>
                <div class="forum-actions">
                    <button class="back-to-games-btn" onclick="goToGames()">‚¨Ö Vitrine D√∂n</button>
                    <button class="new-topic-btn" onclick="openTopicModal()">+ Yeni Konu A√ß</button>
                </div>
            </div>

            <div class="forum-grid">
                <div class="forum-sidebar">
                    <div class="forum-sidebar-title">Kategoriler</div>
                    <button class="cat-btn active">üåê T√ºm√º</button>
                    <button class="cat-btn">üí¨ Genel Tartƒ±≈üma</button>
                    <button class="cat-btn">‚õèÔ∏è Minecraft Destek</button>
                    <button class="cat-btn">üáπüá∑ T√ºrk√ße Yama ƒ∞stek</button>
                </div>
                <div class="main-panel"><div class="thread-list" id="threadContainer"></div></div>
            </div>
        </div>
    </div>

    <div id="authModal" class="modal-overlay">
        <div class="modal-box">
            <button class="close-btn" onclick="closeAuthModal()">√ó</button>
            <h2 style="color: #FFF; margin-top: 0;">BoostRehberi'ne Katƒ±l</h2>
            <button class="google-btn" onclick="loginWithGoogle()"><img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg" alt="Google"> Google ile Giri≈ü Yap</button>
        </div>
    </div>

    <div id="topicModal" class="modal-overlay">
        <div class="modal-box large">
            <button class="close-btn" onclick="closeTopicModal()">√ó</button>
            <h2 style="color: #FFF; margin-top: 0; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px;">üìù Yeni Konu Ba≈ülat</h2>
            <div class="input-group">
                <label>Kategori Se√ßimi</label>
                <select id="topicCat">
                    <option value="üí¨ Genel Tartƒ±≈üma">üí¨ Genel Tartƒ±≈üma</option>
                    <option value="‚õèÔ∏è Minecraft Destek">‚õèÔ∏è Minecraft Destek</option>
                    <option value="üáπüá∑ T√ºrk√ße Yama ƒ∞stek">üáπüá∑ T√ºrk√ße Yama ƒ∞stek</option>
                </select>
            </div>
            <div class="input-group"><label>Konu Ba≈ülƒ±ƒüƒ±</label><input type="text" id="topicTitle" placeholder="√ñrn: Sorunumu nasƒ±l √ß√∂zebilirim?"></div>
            <div class="input-group"><label>ƒ∞√ßerik (Mesajƒ±nƒ±z)</label><textarea id="topicBody" placeholder="Buraya yazƒ±n..."></textarea></div>
            <button class="submit-btn" onclick="submitTopicToDatabase()">Foruma G√∂nder</button>
        </div>
    </div>

    <div id="replyModal" class="modal-overlay">
        <div class="modal-box large">
            <button class="close-btn" onclick="closeReplyModal()">√ó</button>
            <h2 style="color: #3498DB; margin-top: 0; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px;">üí¨ Cevap Yaz</h2>
            <input type="hidden" id="replyThreadId">
            <div class="input-group"><textarea id="replyBody" placeholder="Cevabƒ±nƒ±zƒ± buraya yazƒ±n..."></textarea></div>
            <button class="submit-btn" style="background:#3498DB;" onclick="submitReply()">Yanƒ±tƒ± G√∂nder</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, query, orderBy, doc, updateDoc, arrayUnion, deleteDoc } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyC7NhVifwWUaKikHE3QrkKwjhnLdaW48OY", authDomain: "boostrehberi.firebaseapp.com", projectId: "boostrehberi", storageBucket: "boostrehberi.firebasestorage.app", messagingSenderId: "775353055674", appId: "1:775353055674:web:47d8d22d3a5e976b834583" };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();

        window.isUserLoggedIn = false; window.currentUsername = ""; window.currentUserPhoto = "";
        const ADMIN_EMAIL = "mustafacanyilmazpc@gmail.com"; window.isAdmin = false;

        window.openAuthModal = () => { document.getElementById('authModal').style.display = 'flex'; };
        window.closeAuthModal = () => { document.getElementById('authModal').style.display = 'none'; };
        window.openTopicModal = () => { document.getElementById('topicModal').style.display = 'flex'; };
        window.closeTopicModal = () => { document.getElementById('topicModal').style.display = 'none'; };
        window.openReplyModal = (id) => { if(!window.isUserLoggedIn) { window.openAuthModal(); return; } document.getElementById('replyThreadId').value = id; document.getElementById('replyModal').style.display = 'flex'; };
        window.closeReplyModal = () => { document.getElementById('replyModal').style.display = 'none'; };

        window.loginWithGoogle = () => { signInWithPopup(auth, provider).then(() => { window.closeAuthModal(); }); };
        window.logoutFirebase = () => { signOut(auth).then(() => { window.goToGames(); }); };

        onAuthStateChanged(auth, (user) => {
            if (user) {
                window.isUserLoggedIn = true; window.currentUsername = user.displayName; window.currentUserPhoto = user.photoURL;
                window.isAdmin = (user.email === ADMIN_EMAIL);
                document.getElementById('adminBadge').style.display = window.isAdmin ? 'inline-block' : 'none';
                document.getElementById('usernameDisplay').innerText = user.displayName; document.getElementById('userPhoto').src = user.photoURL; 
                document.getElementById('loginBtn').style.display = 'none'; document.getElementById('userProfile').style.display = 'flex';
                let btns = document.getElementsByClassName('admin-delete-btn'); for(let b of btns) b.style.display = window.isAdmin ? 'block' : 'none';
            } else {
                window.isUserLoggedIn = false; window.isAdmin = false;
                document.getElementById('loginBtn').style.display = 'block'; document.getElementById('userProfile').style.display = 'none';
            }
        });

        window.goToForum = () => { if(window.isUserLoggedIn) { document.getElementById('showcaseSection').style.display = 'none'; document.getElementById('forumSection').style.display = 'block'; window.scrollTo(0,0); } else { window.openAuthModal(); } };
        window.goToGames = () => { document.getElementById('forumSection').style.display = 'none'; document.getElementById('showcaseSection').style.display = 'block'; window.scrollTo(0,0); };

        window.submitTopicToDatabase = async () => {
            if(!window.isUserLoggedIn) return;
            let t = document.getElementById('topicTitle').value, b = document.getElementById('topicBody').value, c = document.getElementById('topicCat').value;
            if(t.trim()==="") return;
            await addDoc(collection(db, "forum_mesajlari"), { baslik: t, icerik: b, kategori: c, yazar: window.currentUsername, fotograf: window.currentUserPhoto, tarih: serverTimestamp(), cevaplar: [] });
            document.getElementById('topicTitle').value = ""; document.getElementById('topicBody').value = ""; window.closeTopicModal();
        };

        window.submitReply = async () => {
            let id = document.getElementById('replyThreadId').value, txt = document.getElementById('replyBody').value; if(txt.trim()==="") return;
            await updateDoc(doc(db, "forum_mesajlari", id), { cevaplar: arrayUnion({ yazar: window.currentUsername, fotograf: window.currentUserPhoto, metin: txt }) });
            document.getElementById('replyBody').value = ""; window.closeReplyModal();
        };

        window.deleteThread = async (id) => { if(window.isAdmin && confirm("Silinsin mi?")) await deleteDoc(doc(db, "forum_mesajlari", id)); };

        onSnapshot(query(collection(db, "forum_mesajlari"), orderBy("tarih", "desc")), (snap) => {
            let c = document.getElementById('threadContainer'); c.innerHTML = "";
            snap.forEach((d) => {
                let data = d.data(), id = d.id;
                let html = `<div class="thread-card">
                    <div class="thread-main">
                        <div class="thread-avatar"><img src="${data.fotograf}"></div>
                        <div class="thread-content">
                            <h3 class="thread-title">${data.baslik}</h3><div class="thread-body">${data.icerik}</div>
                            <div class="thread-meta"><span>${data.yazar}</span> ‚Ä¢ Kategori: ${data.kategori}</div>
                            <div class="thread-actions"><button class="reply-btn" onclick="openReplyModal('${id}')">Cevap Yaz</button><button class="admin-delete-btn" style="${window.isAdmin?'display:block;':'display:none;'}" onclick="deleteThread('${id}')">Sƒ∞L</button></div>
                        </div>
                    </div>`;
                if(data.cevaplar && data.cevaplar.length>0) {
                    html += `<div class="replies-container">`;
                    data.cevaplar.forEach(r => html+=`<div class="reply-item"><div class="reply-avatar"><img src="${r.fotograf}"></div><div class="reply-content"><span class="reply-author">${r.yazar}</span>${r.metin}</div></div>`);
                    html += `</div>`;
                }
                c.insertAdjacentHTML('beforeend', html + `</div>`);
            });
        });
    </script>
</body>
</html>